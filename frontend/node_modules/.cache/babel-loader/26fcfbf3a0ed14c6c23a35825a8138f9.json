{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"steps\", \"defaultCurrent\", \"current\", \"onChange\", \"onClose\", \"onFinish\", \"open\", \"mask\", \"arrow\", \"rootClassName\", \"placement\", \"renderPanel\", \"gap\", \"animated\"];\nimport * as React from 'react';\nimport Trigger from 'rc-trigger';\nimport Portal from '@rc-component/portal';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport useTarget from \"./hooks/useTarget\";\nimport TourStep from \"./TourStep\";\nimport Mask from \"./Mask\";\nimport placements, { getCenterPlacements } from \"./placements\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nvar CENTER_ALIGN = {\n  points: ['cc', 'cc'],\n  offset: [0, 0]\n};\nvar CENTER_PLACEHOLDER = {\n  left: '50%',\n  top: '50%',\n  width: 1,\n  height: 1\n};\n\nvar Tour = function Tour(props) {\n  var _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-tour' : _props$prefixCls,\n      _props$steps = props.steps,\n      steps = _props$steps === void 0 ? [] : _props$steps,\n      defaultCurrent = props.defaultCurrent,\n      current = props.current,\n      onChange = props.onChange,\n      onClose = props.onClose,\n      _onFinish = props.onFinish,\n      open = props.open,\n      _props$mask = props.mask,\n      mask = _props$mask === void 0 ? true : _props$mask,\n      _props$arrow = props.arrow,\n      arrow = _props$arrow === void 0 ? true : _props$arrow,\n      rootClassName = props.rootClassName,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottom' : _props$placement,\n      renderPanel = props.renderPanel,\n      gap = props.gap,\n      animated = props.animated,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var _useMergedState = useMergedState(0, {\n    value: current,\n    defaultValue: defaultCurrent\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedCurrent = _useMergedState2[0],\n      setMergedCurrent = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(undefined, {\n    value: open,\n    postState: function postState(origin) {\n      return mergedCurrent < 0 || mergedCurrent >= steps.length ? false : origin !== null && origin !== void 0 ? origin : true;\n    }\n  }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      mergedOpen = _useMergedState4[0],\n      setMergedOpen = _useMergedState4[1];\n\n  var openRef = React.useRef(mergedOpen);\n  useLayoutEffect(function () {\n    if (mergedOpen && !openRef.current) {\n      setMergedCurrent(0);\n    }\n\n    openRef.current = mergedOpen;\n  }, [mergedOpen]);\n\n  var _ref = steps[mergedCurrent] || {},\n      target = _ref.target,\n      stepPlacement = _ref.placement,\n      stepStyle = _ref.style,\n      stepArrow = _ref.arrow,\n      stepClassName = _ref.className,\n      stepMask = _ref.mask;\n\n  var mergedPlacement = stepPlacement !== null && stepPlacement !== void 0 ? stepPlacement : placement;\n  var mergedMask = mergedOpen && (stepMask !== null && stepMask !== void 0 ? stepMask : mask);\n\n  var _useTarget = useTarget(target, open, gap),\n      _useTarget2 = _slicedToArray(_useTarget, 2),\n      posInfo = _useTarget2[0],\n      targetElement = _useTarget2[1]; // ========================= arrow =========================\n\n\n  var mergedArrow = targetElement ? typeof stepArrow === 'undefined' ? arrow : stepArrow : false;\n  var arrowPointAtCenter = _typeof(mergedArrow) === 'object' ? mergedArrow.pointAtCenter : false;\n  var arrowClassName = classNames(\"\".concat(prefixCls, \"-arrow\"), _defineProperty({}, \"\".concat(prefixCls, \"-arrowPointAtCenter\"), arrowPointAtCenter)); // ========================= Change =========================\n\n  var onInternalChange = function onInternalChange(nextCurrent) {\n    setMergedCurrent(nextCurrent);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextCurrent);\n  }; // ========================= popupAlign =========================\n\n\n  var popupAlign = targetElement ? arrowPointAtCenter ? getCenterPlacements({\n    placement: placement\n  }) : placements[mergedPlacement] : CENTER_ALIGN; // ========================= Render =========================\n  // Skip if not init yet\n\n  if (targetElement === undefined) {\n    return null;\n  }\n\n  var handleClose = function handleClose() {\n    setMergedOpen(false);\n    onClose === null || onClose === void 0 ? void 0 : onClose(mergedCurrent);\n  };\n\n  var getPopupElement = function getPopupElement() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-content\")\n    }, mergedArrow && /*#__PURE__*/React.createElement(\"div\", {\n      className: arrowClassName,\n      key: \"arrow\"\n    }), /*#__PURE__*/React.createElement(TourStep, _extends({\n      key: \"content\",\n      prefixCls: prefixCls,\n      total: steps.length,\n      renderPanel: renderPanel,\n      onPrev: function onPrev() {\n        onInternalChange(mergedCurrent - 1);\n      },\n      onNext: function onNext() {\n        onInternalChange(mergedCurrent + 1);\n      },\n      onClose: handleClose,\n      current: mergedCurrent,\n      onFinish: function onFinish() {\n        handleClose();\n        _onFinish === null || _onFinish === void 0 ? void 0 : _onFinish();\n      }\n    }, steps[mergedCurrent])));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Trigger, _extends({}, restProps, {\n    popupAlign: popupAlign,\n    popupStyle: stepStyle,\n    popupPlacement: mergedPlacement,\n    builtinPlacements: placements,\n    popupVisible: mergedOpen,\n    popupClassName: classNames(rootClassName, stepClassName),\n    prefixCls: prefixCls,\n    popup: getPopupElement,\n    forceRender: false,\n    destroyPopupOnHide: true,\n    zIndex: 1090\n  }), /*#__PURE__*/React.createElement(Portal, {\n    open: mergedOpen,\n    autoLock: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(rootClassName, \"\".concat(prefixCls, \"-target-placeholder\")),\n    style: _objectSpread(_objectSpread({}, posInfo || CENTER_PLACEHOLDER), {}, {\n      position: 'fixed',\n      pointerEvents: 'none'\n    })\n  }))), /*#__PURE__*/React.createElement(Mask, {\n    prefixCls: prefixCls,\n    pos: posInfo,\n    mask: mergedMask,\n    open: mergedOpen,\n    animated: animated,\n    rootClassName: rootClassName\n  }));\n};\n\nexport default Tour;","map":{"version":3,"sources":["E:/railway/expressjs-mongoose/frontend/node_modules/@rc-component/tour/es/Tour.js"],"names":["_objectSpread","_extends","_defineProperty","_typeof","_slicedToArray","_objectWithoutProperties","_excluded","React","Trigger","Portal","classNames","useMergedState","useTarget","TourStep","Mask","placements","getCenterPlacements","useLayoutEffect","CENTER_ALIGN","points","offset","CENTER_PLACEHOLDER","left","top","width","height","Tour","props","_props$prefixCls","prefixCls","_props$steps","steps","defaultCurrent","current","onChange","onClose","_onFinish","onFinish","open","_props$mask","mask","_props$arrow","arrow","rootClassName","_props$placement","placement","renderPanel","gap","animated","restProps","_useMergedState","value","defaultValue","_useMergedState2","mergedCurrent","setMergedCurrent","_useMergedState3","undefined","postState","origin","length","_useMergedState4","mergedOpen","setMergedOpen","openRef","useRef","_ref","target","stepPlacement","stepStyle","style","stepArrow","stepClassName","className","stepMask","mergedPlacement","mergedMask","_useTarget","_useTarget2","posInfo","targetElement","mergedArrow","arrowPointAtCenter","pointAtCenter","arrowClassName","concat","onInternalChange","nextCurrent","popupAlign","handleClose","getPopupElement","createElement","key","total","onPrev","onNext","Fragment","popupStyle","popupPlacement","builtinPlacements","popupVisible","popupClassName","popup","forceRender","destroyPopupOnHide","zIndex","autoLock","position","pointerEvents","pos"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"steps\", \"defaultCurrent\", \"current\", \"onChange\", \"onClose\", \"onFinish\", \"open\", \"mask\", \"arrow\", \"rootClassName\", \"placement\", \"renderPanel\", \"gap\", \"animated\"];\nimport * as React from 'react';\nimport Trigger from 'rc-trigger';\nimport Portal from '@rc-component/portal';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport useTarget from \"./hooks/useTarget\";\nimport TourStep from \"./TourStep\";\nimport Mask from \"./Mask\";\nimport placements, { getCenterPlacements } from \"./placements\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nvar CENTER_ALIGN = {\n  points: ['cc', 'cc'],\n  offset: [0, 0]\n};\nvar CENTER_PLACEHOLDER = {\n  left: '50%',\n  top: '50%',\n  width: 1,\n  height: 1\n};\n\nvar Tour = function Tour(props) {\n  var _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-tour' : _props$prefixCls,\n      _props$steps = props.steps,\n      steps = _props$steps === void 0 ? [] : _props$steps,\n      defaultCurrent = props.defaultCurrent,\n      current = props.current,\n      onChange = props.onChange,\n      onClose = props.onClose,\n      _onFinish = props.onFinish,\n      open = props.open,\n      _props$mask = props.mask,\n      mask = _props$mask === void 0 ? true : _props$mask,\n      _props$arrow = props.arrow,\n      arrow = _props$arrow === void 0 ? true : _props$arrow,\n      rootClassName = props.rootClassName,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottom' : _props$placement,\n      renderPanel = props.renderPanel,\n      gap = props.gap,\n      animated = props.animated,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var _useMergedState = useMergedState(0, {\n    value: current,\n    defaultValue: defaultCurrent\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedCurrent = _useMergedState2[0],\n      setMergedCurrent = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(undefined, {\n    value: open,\n    postState: function postState(origin) {\n      return mergedCurrent < 0 || mergedCurrent >= steps.length ? false : origin !== null && origin !== void 0 ? origin : true;\n    }\n  }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      mergedOpen = _useMergedState4[0],\n      setMergedOpen = _useMergedState4[1];\n\n  var openRef = React.useRef(mergedOpen);\n  useLayoutEffect(function () {\n    if (mergedOpen && !openRef.current) {\n      setMergedCurrent(0);\n    }\n\n    openRef.current = mergedOpen;\n  }, [mergedOpen]);\n\n  var _ref = steps[mergedCurrent] || {},\n      target = _ref.target,\n      stepPlacement = _ref.placement,\n      stepStyle = _ref.style,\n      stepArrow = _ref.arrow,\n      stepClassName = _ref.className,\n      stepMask = _ref.mask;\n\n  var mergedPlacement = stepPlacement !== null && stepPlacement !== void 0 ? stepPlacement : placement;\n  var mergedMask = mergedOpen && (stepMask !== null && stepMask !== void 0 ? stepMask : mask);\n\n  var _useTarget = useTarget(target, open, gap),\n      _useTarget2 = _slicedToArray(_useTarget, 2),\n      posInfo = _useTarget2[0],\n      targetElement = _useTarget2[1]; // ========================= arrow =========================\n\n\n  var mergedArrow = targetElement ? typeof stepArrow === 'undefined' ? arrow : stepArrow : false;\n  var arrowPointAtCenter = _typeof(mergedArrow) === 'object' ? mergedArrow.pointAtCenter : false;\n  var arrowClassName = classNames(\"\".concat(prefixCls, \"-arrow\"), _defineProperty({}, \"\".concat(prefixCls, \"-arrowPointAtCenter\"), arrowPointAtCenter)); // ========================= Change =========================\n\n  var onInternalChange = function onInternalChange(nextCurrent) {\n    setMergedCurrent(nextCurrent);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextCurrent);\n  }; // ========================= popupAlign =========================\n\n\n  var popupAlign = targetElement ? arrowPointAtCenter ? getCenterPlacements({\n    placement: placement\n  }) : placements[mergedPlacement] : CENTER_ALIGN; // ========================= Render =========================\n  // Skip if not init yet\n\n  if (targetElement === undefined) {\n    return null;\n  }\n\n  var handleClose = function handleClose() {\n    setMergedOpen(false);\n    onClose === null || onClose === void 0 ? void 0 : onClose(mergedCurrent);\n  };\n\n  var getPopupElement = function getPopupElement() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-content\")\n    }, mergedArrow && /*#__PURE__*/React.createElement(\"div\", {\n      className: arrowClassName,\n      key: \"arrow\"\n    }), /*#__PURE__*/React.createElement(TourStep, _extends({\n      key: \"content\",\n      prefixCls: prefixCls,\n      total: steps.length,\n      renderPanel: renderPanel,\n      onPrev: function onPrev() {\n        onInternalChange(mergedCurrent - 1);\n      },\n      onNext: function onNext() {\n        onInternalChange(mergedCurrent + 1);\n      },\n      onClose: handleClose,\n      current: mergedCurrent,\n      onFinish: function onFinish() {\n        handleClose();\n        _onFinish === null || _onFinish === void 0 ? void 0 : _onFinish();\n      }\n    }, steps[mergedCurrent])));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Trigger, _extends({}, restProps, {\n    popupAlign: popupAlign,\n    popupStyle: stepStyle,\n    popupPlacement: mergedPlacement,\n    builtinPlacements: placements,\n    popupVisible: mergedOpen,\n    popupClassName: classNames(rootClassName, stepClassName),\n    prefixCls: prefixCls,\n    popup: getPopupElement,\n    forceRender: false,\n    destroyPopupOnHide: true,\n    zIndex: 1090\n  }), /*#__PURE__*/React.createElement(Portal, {\n    open: mergedOpen,\n    autoLock: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(rootClassName, \"\".concat(prefixCls, \"-target-placeholder\")),\n    style: _objectSpread(_objectSpread({}, posInfo || CENTER_PLACEHOLDER), {}, {\n      position: 'fixed',\n      pointerEvents: 'none'\n    })\n  }))), /*#__PURE__*/React.createElement(Mask, {\n    prefixCls: prefixCls,\n    pos: posInfo,\n    mask: mergedMask,\n    open: mergedOpen,\n    animated: animated,\n    rootClassName: rootClassName\n  }));\n};\n\nexport default Tour;"]},"metadata":{},"sourceType":"module"}