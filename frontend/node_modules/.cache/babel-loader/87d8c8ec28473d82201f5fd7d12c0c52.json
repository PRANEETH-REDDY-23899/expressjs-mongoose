{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport addEventListener from \"rc-util/es/Dom/addEventListener\";\nimport * as React from 'react';\nimport Affix from '../affix';\nimport { ConfigContext } from '../config-provider';\nimport getScroll from '../_util/getScroll';\nimport scrollTo from '../_util/scrollTo';\nimport AnchorContext from './context';\nimport useStyle from './style';\n\nfunction getDefaultContainer() {\n  return window;\n}\n\nfunction getOffsetTop(element, container) {\n  if (!element.getClientRects().length) {\n    return 0;\n  }\n\n  var rect = element.getBoundingClientRect();\n\n  if (rect.width || rect.height) {\n    if (container === window) {\n      container = element.ownerDocument.documentElement;\n      return rect.top - container.clientTop;\n    }\n\n    return rect.top - container.getBoundingClientRect().top;\n  }\n\n  return rect.top;\n}\n\nvar sharpMatcherRegx = /#([\\S ]+)$/;\n\nvar AnchorContent = function AnchorContent(props) {\n  var _a;\n\n  var rootClassName = props.rootClassName,\n      prefixCls = props.anchorPrefixCls,\n      _props$className = props.className,\n      className = _props$className === void 0 ? '' : _props$className,\n      style = props.style,\n      offsetTop = props.offsetTop,\n      _props$affix = props.affix,\n      affix = _props$affix === void 0 ? true : _props$affix,\n      _props$showInkInFixed = props.showInkInFixed,\n      showInkInFixed = _props$showInkInFixed === void 0 ? false : _props$showInkInFixed,\n      children = props.children,\n      bounds = props.bounds,\n      targetOffset = props.targetOffset,\n      onClick = props.onClick,\n      onChange = props.onChange,\n      getContainer = props.getContainer,\n      getCurrentAnchor = props.getCurrentAnchor;\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      links = _React$useState2[0],\n      setLinks = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      activeLink = _React$useState4[0],\n      setActiveLink = _React$useState4[1];\n\n  var activeLinkRef = React.useRef(activeLink);\n  var wrapperRef = React.useRef(null);\n  var spanLinkNode = React.useRef(null);\n  var animating = React.useRef(false);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      direction = _React$useContext.direction,\n      getTargetContainer = _React$useContext.getTargetContainer;\n\n  var getCurrentContainer = (_a = getContainer !== null && getContainer !== void 0 ? getContainer : getTargetContainer) !== null && _a !== void 0 ? _a : getDefaultContainer;\n  var dependencyListItem = JSON.stringify(links);\n  var registerLink = React.useCallback(function (link) {\n    if (!links.includes(link)) {\n      setLinks(function (prev) {\n        return [].concat(_toConsumableArray(prev), [link]);\n      });\n    }\n  }, [dependencyListItem]);\n  var unregisterLink = React.useCallback(function (link) {\n    if (links.includes(link)) {\n      setLinks(function (prev) {\n        return prev.filter(function (i) {\n          return i !== link;\n        });\n      });\n    }\n  }, [dependencyListItem]);\n\n  var updateInk = function updateInk() {\n    var _a;\n\n    var linkNode = (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\".\" + prefixCls + \"-link-title-active\");\n\n    if (linkNode && spanLinkNode.current) {\n      spanLinkNode.current.style.top = linkNode.offsetTop + linkNode.clientHeight / 2 + \"px\";\n      spanLinkNode.current.style.height = linkNode.clientHeight + \"px\";\n    }\n  };\n\n  var getInternalCurrentAnchor = function getInternalCurrentAnchor(_links) {\n    var _offsetTop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    var _bounds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n\n    var linkSections = [];\n    var container = getCurrentContainer();\n\n    _links.forEach(function (link) {\n      var sharpLinkMatch = sharpMatcherRegx.exec(link === null || link === void 0 ? void 0 : link.toString());\n\n      if (!sharpLinkMatch) {\n        return;\n      }\n\n      var target = document.getElementById(sharpLinkMatch[1]);\n\n      if (target) {\n        var top = getOffsetTop(target, container);\n\n        if (top < _offsetTop + _bounds) {\n          linkSections.push({\n            link: link,\n            top: top\n          });\n        }\n      }\n    });\n\n    if (linkSections.length) {\n      var maxSection = linkSections.reduce(function (prev, curr) {\n        return curr.top > prev.top ? curr : prev;\n      });\n      return maxSection.link;\n    }\n\n    return '';\n  };\n\n  var setCurrentActiveLink = function setCurrentActiveLink(link) {\n    if (activeLinkRef.current === link) {\n      return;\n    } // https://github.com/ant-design/ant-design/issues/30584\n\n\n    var newLink = typeof getCurrentAnchor === 'function' ? getCurrentAnchor(link) : link;\n    setActiveLink(newLink);\n    activeLinkRef.current = newLink; // onChange should respect the original link (which may caused by\n    // window scroll or user click), not the new link\n\n    onChange === null || onChange === void 0 ? void 0 : onChange(link);\n  };\n\n  var handleScroll = React.useCallback(function () {\n    if (animating.current) {\n      return;\n    }\n\n    if (typeof getCurrentAnchor === 'function') {\n      return;\n    }\n\n    var currentActiveLink = getInternalCurrentAnchor(links, targetOffset !== undefined ? targetOffset : offsetTop || 0, bounds);\n    setCurrentActiveLink(currentActiveLink);\n  }, [dependencyListItem, targetOffset, offsetTop]);\n  var handleScrollTo = React.useCallback(function (link) {\n    setCurrentActiveLink(link);\n    var container = getCurrentContainer();\n    var scrollTop = getScroll(container, true);\n    var sharpLinkMatch = sharpMatcherRegx.exec(link);\n\n    if (!sharpLinkMatch) {\n      return;\n    }\n\n    var targetElement = document.getElementById(sharpLinkMatch[1]);\n\n    if (!targetElement) {\n      return;\n    }\n\n    var eleOffsetTop = getOffsetTop(targetElement, container);\n    var y = scrollTop + eleOffsetTop;\n    y -= targetOffset !== undefined ? targetOffset : offsetTop || 0;\n    animating.current = true;\n    scrollTo(y, {\n      getContainer: getCurrentContainer,\n      callback: function callback() {\n        animating.current = false;\n      }\n    });\n  }, [targetOffset, offsetTop]);\n  var inkClass = classNames(_defineProperty({}, prefixCls + \"-ink-ball-visible\", activeLink), prefixCls + \"-ink-ball\");\n  var wrapperClass = classNames(rootClassName, prefixCls + \"-wrapper\", _defineProperty({}, prefixCls + \"-rtl\", direction === 'rtl'), className);\n  var anchorClass = classNames(prefixCls, _defineProperty({}, prefixCls + \"-fixed\", !affix && !showInkInFixed));\n\n  var wrapperStyle = _extends({\n    maxHeight: offsetTop ? \"calc(100vh - \" + offsetTop + \"px)\" : '100vh'\n  }, style);\n\n  var anchorContent = /*#__PURE__*/React.createElement(\"div\", {\n    ref: wrapperRef,\n    className: wrapperClass,\n    style: wrapperStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: anchorClass\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: prefixCls + \"-ink\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: inkClass,\n    ref: spanLinkNode\n  })), children));\n  React.useEffect(function () {\n    var scrollContainer = getCurrentContainer();\n    var scrollEvent = addEventListener(scrollContainer, 'scroll', handleScroll);\n    handleScroll();\n    return function () {\n      scrollEvent === null || scrollEvent === void 0 ? void 0 : scrollEvent.remove();\n    };\n  }, [dependencyListItem]);\n  React.useEffect(function () {\n    if (typeof getCurrentAnchor === 'function') {\n      setCurrentActiveLink(getCurrentAnchor(activeLinkRef.current || ''));\n    }\n  }, [getCurrentAnchor]);\n  React.useEffect(function () {\n    updateInk();\n  }, [getCurrentAnchor, dependencyListItem, activeLink]);\n  var memoizedContextValue = React.useMemo(function () {\n    return {\n      registerLink: registerLink,\n      unregisterLink: unregisterLink,\n      scrollTo: handleScrollTo,\n      activeLink: activeLink,\n      onClick: onClick\n    };\n  }, [activeLink, onClick, handleScrollTo]);\n  return /*#__PURE__*/React.createElement(AnchorContext.Provider, {\n    value: memoizedContextValue\n  }, affix ? /*#__PURE__*/React.createElement(Affix, {\n    offsetTop: offsetTop,\n    target: getCurrentContainer\n  }, anchorContent) : anchorContent);\n};\n\nvar Anchor = function Anchor(props) {\n  var customizePrefixCls = props.prefixCls;\n\n  var _React$useContext2 = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext2.getPrefixCls;\n\n  var anchorPrefixCls = getPrefixCls('anchor', customizePrefixCls);\n\n  var _useStyle = useStyle(anchorPrefixCls),\n      _useStyle2 = _slicedToArray(_useStyle, 2),\n      wrapSSR = _useStyle2[0],\n      hashId = _useStyle2[1];\n\n  return wrapSSR( /*#__PURE__*/React.createElement(AnchorContent, _extends({}, props, {\n    rootClassName: hashId,\n    anchorPrefixCls: anchorPrefixCls\n  })));\n};\n\nexport default Anchor;","map":{"version":3,"sources":["E:/railway/expressjs-mongoose/frontend/node_modules/antd/es/anchor/Anchor.js"],"names":["_extends","_defineProperty","_toConsumableArray","_slicedToArray","classNames","addEventListener","React","Affix","ConfigContext","getScroll","scrollTo","AnchorContext","useStyle","getDefaultContainer","window","getOffsetTop","element","container","getClientRects","length","rect","getBoundingClientRect","width","height","ownerDocument","documentElement","top","clientTop","sharpMatcherRegx","AnchorContent","props","_a","rootClassName","prefixCls","anchorPrefixCls","_props$className","className","style","offsetTop","_props$affix","affix","_props$showInkInFixed","showInkInFixed","children","bounds","targetOffset","onClick","onChange","getContainer","getCurrentAnchor","_React$useState","useState","_React$useState2","links","setLinks","_React$useState3","_React$useState4","activeLink","setActiveLink","activeLinkRef","useRef","wrapperRef","spanLinkNode","animating","_React$useContext","useContext","direction","getTargetContainer","getCurrentContainer","dependencyListItem","JSON","stringify","registerLink","useCallback","link","includes","prev","concat","unregisterLink","filter","i","updateInk","linkNode","current","querySelector","clientHeight","getInternalCurrentAnchor","_links","_offsetTop","arguments","undefined","_bounds","linkSections","forEach","sharpLinkMatch","exec","toString","target","document","getElementById","push","maxSection","reduce","curr","setCurrentActiveLink","newLink","handleScroll","currentActiveLink","handleScrollTo","scrollTop","targetElement","eleOffsetTop","y","callback","inkClass","wrapperClass","anchorClass","wrapperStyle","maxHeight","anchorContent","createElement","ref","useEffect","scrollContainer","scrollEvent","remove","memoizedContextValue","useMemo","Provider","value","Anchor","customizePrefixCls","_React$useContext2","getPrefixCls","_useStyle","_useStyle2","wrapSSR","hashId"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport addEventListener from \"rc-util/es/Dom/addEventListener\";\nimport * as React from 'react';\nimport Affix from '../affix';\nimport { ConfigContext } from '../config-provider';\nimport getScroll from '../_util/getScroll';\nimport scrollTo from '../_util/scrollTo';\nimport AnchorContext from './context';\nimport useStyle from './style';\nfunction getDefaultContainer() {\n  return window;\n}\nfunction getOffsetTop(element, container) {\n  if (!element.getClientRects().length) {\n    return 0;\n  }\n  var rect = element.getBoundingClientRect();\n  if (rect.width || rect.height) {\n    if (container === window) {\n      container = element.ownerDocument.documentElement;\n      return rect.top - container.clientTop;\n    }\n    return rect.top - container.getBoundingClientRect().top;\n  }\n  return rect.top;\n}\nvar sharpMatcherRegx = /#([\\S ]+)$/;\nvar AnchorContent = function AnchorContent(props) {\n  var _a;\n  var rootClassName = props.rootClassName,\n    prefixCls = props.anchorPrefixCls,\n    _props$className = props.className,\n    className = _props$className === void 0 ? '' : _props$className,\n    style = props.style,\n    offsetTop = props.offsetTop,\n    _props$affix = props.affix,\n    affix = _props$affix === void 0 ? true : _props$affix,\n    _props$showInkInFixed = props.showInkInFixed,\n    showInkInFixed = _props$showInkInFixed === void 0 ? false : _props$showInkInFixed,\n    children = props.children,\n    bounds = props.bounds,\n    targetOffset = props.targetOffset,\n    onClick = props.onClick,\n    onChange = props.onChange,\n    getContainer = props.getContainer,\n    getCurrentAnchor = props.getCurrentAnchor;\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    links = _React$useState2[0],\n    setLinks = _React$useState2[1];\n  var _React$useState3 = React.useState(null),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    activeLink = _React$useState4[0],\n    setActiveLink = _React$useState4[1];\n  var activeLinkRef = React.useRef(activeLink);\n  var wrapperRef = React.useRef(null);\n  var spanLinkNode = React.useRef(null);\n  var animating = React.useRef(false);\n  var _React$useContext = React.useContext(ConfigContext),\n    direction = _React$useContext.direction,\n    getTargetContainer = _React$useContext.getTargetContainer;\n  var getCurrentContainer = (_a = getContainer !== null && getContainer !== void 0 ? getContainer : getTargetContainer) !== null && _a !== void 0 ? _a : getDefaultContainer;\n  var dependencyListItem = JSON.stringify(links);\n  var registerLink = React.useCallback(function (link) {\n    if (!links.includes(link)) {\n      setLinks(function (prev) {\n        return [].concat(_toConsumableArray(prev), [link]);\n      });\n    }\n  }, [dependencyListItem]);\n  var unregisterLink = React.useCallback(function (link) {\n    if (links.includes(link)) {\n      setLinks(function (prev) {\n        return prev.filter(function (i) {\n          return i !== link;\n        });\n      });\n    }\n  }, [dependencyListItem]);\n  var updateInk = function updateInk() {\n    var _a;\n    var linkNode = (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\".\" + prefixCls + \"-link-title-active\");\n    if (linkNode && spanLinkNode.current) {\n      spanLinkNode.current.style.top = linkNode.offsetTop + linkNode.clientHeight / 2 + \"px\";\n      spanLinkNode.current.style.height = linkNode.clientHeight + \"px\";\n    }\n  };\n  var getInternalCurrentAnchor = function getInternalCurrentAnchor(_links) {\n    var _offsetTop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var _bounds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n    var linkSections = [];\n    var container = getCurrentContainer();\n    _links.forEach(function (link) {\n      var sharpLinkMatch = sharpMatcherRegx.exec(link === null || link === void 0 ? void 0 : link.toString());\n      if (!sharpLinkMatch) {\n        return;\n      }\n      var target = document.getElementById(sharpLinkMatch[1]);\n      if (target) {\n        var top = getOffsetTop(target, container);\n        if (top < _offsetTop + _bounds) {\n          linkSections.push({\n            link: link,\n            top: top\n          });\n        }\n      }\n    });\n    if (linkSections.length) {\n      var maxSection = linkSections.reduce(function (prev, curr) {\n        return curr.top > prev.top ? curr : prev;\n      });\n      return maxSection.link;\n    }\n    return '';\n  };\n  var setCurrentActiveLink = function setCurrentActiveLink(link) {\n    if (activeLinkRef.current === link) {\n      return;\n    }\n    // https://github.com/ant-design/ant-design/issues/30584\n    var newLink = typeof getCurrentAnchor === 'function' ? getCurrentAnchor(link) : link;\n    setActiveLink(newLink);\n    activeLinkRef.current = newLink;\n    // onChange should respect the original link (which may caused by\n    // window scroll or user click), not the new link\n    onChange === null || onChange === void 0 ? void 0 : onChange(link);\n  };\n  var handleScroll = React.useCallback(function () {\n    if (animating.current) {\n      return;\n    }\n    if (typeof getCurrentAnchor === 'function') {\n      return;\n    }\n    var currentActiveLink = getInternalCurrentAnchor(links, targetOffset !== undefined ? targetOffset : offsetTop || 0, bounds);\n    setCurrentActiveLink(currentActiveLink);\n  }, [dependencyListItem, targetOffset, offsetTop]);\n  var handleScrollTo = React.useCallback(function (link) {\n    setCurrentActiveLink(link);\n    var container = getCurrentContainer();\n    var scrollTop = getScroll(container, true);\n    var sharpLinkMatch = sharpMatcherRegx.exec(link);\n    if (!sharpLinkMatch) {\n      return;\n    }\n    var targetElement = document.getElementById(sharpLinkMatch[1]);\n    if (!targetElement) {\n      return;\n    }\n    var eleOffsetTop = getOffsetTop(targetElement, container);\n    var y = scrollTop + eleOffsetTop;\n    y -= targetOffset !== undefined ? targetOffset : offsetTop || 0;\n    animating.current = true;\n    scrollTo(y, {\n      getContainer: getCurrentContainer,\n      callback: function callback() {\n        animating.current = false;\n      }\n    });\n  }, [targetOffset, offsetTop]);\n  var inkClass = classNames(_defineProperty({}, prefixCls + \"-ink-ball-visible\", activeLink), prefixCls + \"-ink-ball\");\n  var wrapperClass = classNames(rootClassName, prefixCls + \"-wrapper\", _defineProperty({}, prefixCls + \"-rtl\", direction === 'rtl'), className);\n  var anchorClass = classNames(prefixCls, _defineProperty({}, prefixCls + \"-fixed\", !affix && !showInkInFixed));\n  var wrapperStyle = _extends({\n    maxHeight: offsetTop ? \"calc(100vh - \" + offsetTop + \"px)\" : '100vh'\n  }, style);\n  var anchorContent = /*#__PURE__*/React.createElement(\"div\", {\n    ref: wrapperRef,\n    className: wrapperClass,\n    style: wrapperStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: anchorClass\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: prefixCls + \"-ink\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: inkClass,\n    ref: spanLinkNode\n  })), children));\n  React.useEffect(function () {\n    var scrollContainer = getCurrentContainer();\n    var scrollEvent = addEventListener(scrollContainer, 'scroll', handleScroll);\n    handleScroll();\n    return function () {\n      scrollEvent === null || scrollEvent === void 0 ? void 0 : scrollEvent.remove();\n    };\n  }, [dependencyListItem]);\n  React.useEffect(function () {\n    if (typeof getCurrentAnchor === 'function') {\n      setCurrentActiveLink(getCurrentAnchor(activeLinkRef.current || ''));\n    }\n  }, [getCurrentAnchor]);\n  React.useEffect(function () {\n    updateInk();\n  }, [getCurrentAnchor, dependencyListItem, activeLink]);\n  var memoizedContextValue = React.useMemo(function () {\n    return {\n      registerLink: registerLink,\n      unregisterLink: unregisterLink,\n      scrollTo: handleScrollTo,\n      activeLink: activeLink,\n      onClick: onClick\n    };\n  }, [activeLink, onClick, handleScrollTo]);\n  return /*#__PURE__*/React.createElement(AnchorContext.Provider, {\n    value: memoizedContextValue\n  }, affix ? /*#__PURE__*/React.createElement(Affix, {\n    offsetTop: offsetTop,\n    target: getCurrentContainer\n  }, anchorContent) : anchorContent);\n};\nvar Anchor = function Anchor(props) {\n  var customizePrefixCls = props.prefixCls;\n  var _React$useContext2 = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext2.getPrefixCls;\n  var anchorPrefixCls = getPrefixCls('anchor', customizePrefixCls);\n  var _useStyle = useStyle(anchorPrefixCls),\n    _useStyle2 = _slicedToArray(_useStyle, 2),\n    wrapSSR = _useStyle2[0],\n    hashId = _useStyle2[1];\n  return wrapSSR( /*#__PURE__*/React.createElement(AnchorContent, _extends({}, props, {\n    rootClassName: hashId,\n    anchorPrefixCls: anchorPrefixCls\n  })));\n};\nexport default Anchor;"]},"metadata":{},"sourceType":"module"}